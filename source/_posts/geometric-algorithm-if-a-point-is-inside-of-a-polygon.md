---
title: å‡ ä½•ç®—æ³•ä¹‹åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…
date: 2018-03-12 17:19
updated: 2018-03-12 17:19
categories: blog
tags:
- ç®—æ³•
- å‡ ä½•
- æ•°å­¦
comments: true
blog_category: Tech Note
summary: å‡ ä½•ç®—æ³•ç³»åˆ—æ–‡ç« ï¼Œæ€»ç»“ä¸€ä¸‹åˆ¤æ–­æŸä¸ªç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…çš„ç®—æ³•
---

è¿™æ˜¯ä¸€é“ç»å…¸çš„ç®—æ³•é¢˜ã€‚ä»¥å‰æˆ‘æ²¡æœ‰ç”¨åˆ°è¿‡ï¼Œä½†æ˜¯åœ¨åšåˆ›æ„ç¼–ç¨‹ç”šè‡³æ˜¯å›¾åƒå¤„ç†çš„æ—¶å€™ï¼Œæˆ‘å°±ç»å¸¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚

# 0x00 ç›¸äº¤æ•°æ–¹æ³•ï¼ˆCrossing Number - CNï¼‰

æ€»ä½“æ¥è¯´ï¼Œå°±æ˜¯ä»è¯¥ç‚¹ä¸Šå‘å°„ä¸€ä¸ªå°„çº¿ï¼Œå¦‚æœå°„çº¿å’Œå¤šè¾¹å½¢çš„è¾¹æœ‰å¥‡æ•°æ¡ç›¸äº¤ï¼Œé‚£ä¹ˆå°±æ˜¯åœ¨å¤šè¾¹å½¢å†…éƒ¨ï¼›å¶æ•°åˆ™ä¸ºå†…éƒ¨ã€‚

{% asset_img point-to-polygon.png ç®—æ³•ç¤ºæ„å›¾ %}

å…·ä½“çš„ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š

1. ä»è¯¥ç‚¹å‘å³æ°´å¹³ï¼ˆæˆ–è€…ä»»ä½•ä¸€ä¸ªä½ å–œæ¬¢çš„æ–¹å‘ï¼‰ç”»ä¸€æ¡æ— é™å»¶é•¿çš„çº¿ï¼ˆå³å°„çº¿ï¼‰
2. æ•°ä¸€æ•°è¿™æ¡å°„çº¿å’Œå¤šè¾¹å½¢è¾¹çš„ç›¸äº¤æ•°é‡
3. å¦‚æœæ˜¯å¥‡æ•°ï¼Œè¯´æ˜ç‚¹åœ¨å¤šè¾¹å½¢å†…éƒ¨ï¼›å¦‚æœæ˜¯å¶æ•°ï¼Œè¯´æ˜ç‚¹åœ¨å¤šè¾¹å½¢å¤–éƒ¨
4. **è¿™é‡Œè¿˜éœ€è¦åˆ¤æ–­ä¸€ä¸‹ç‰¹ä¾‹æƒ…å†µï¼Œå°±æ˜¯å‡å¦‚è¿™æ¡å°„çº¿ä¸å¤šè¾¹å½¢æŸä¸ªè¾¹åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šçš„æƒ…å†µï¼š**
    1. é¦–å…ˆï¼Œåˆ¤æ–­å‡ºä»–ä»¬å…±çº¿
    2. å…¶æ¬¡ï¼Œåˆ¤æ–­è¿™ä¸ªç‚¹æ˜¯å¦åœ¨è¿™æ¡è¾¹çš„çº¿æ®µä¸­ï¼Œå¦‚æœåœ¨çº¿æ®µå¤–ï¼Œåˆ™è¿”å›å¦ï¼ˆè‡³äºç‚¹å¦‚æœåœ¨è¾¹ä¸Šç®—ä¸ç®—åœ¨å¤šè¾¹å½¢å†…ï¼Œåˆ™éœ€è¦æ ¹æ®ä½ çš„éœ€è¦æ¥åˆ¤æ–­äº†ï¼Œå…·ä½“è¯·è§å‚è€ƒ 3ï¼‰

è¿™ä¸ªç®—æ³•çš„å¤æ‚åº¦æ˜¯ `O(n)`ï¼Œn ä¸ºå¤šè¾¹å½¢çš„é¡¶ç‚¹æ•°ã€‚

ä½¿ç”¨ Processing å®ç°è¿™ä¸ªç®—æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```Java
  void setup() {
    //ç¨åè¡¥å……
  }

  void draw() {

  }

```


> å¦ï¼šåˆ¤æ–­ä¸¤æ¡çº¿æ®µæ˜¯å¦ç›¸äº¤çš„æ–¹æ³•ï¼Œä¸€èˆ¬åˆ¤æ–­æ–¹å‘æ˜¯å¦ç›¸åŒã€‚åç»­æ–‡ç« æˆ‘ä¼šå†åšå‡ºè§£é‡Šã€‚

# 0x01 ç¯ç»•æ•°æ–¹æ³•ï¼ˆWinding Number - WNï¼‰

æ€»ä½“æ¥è¯´ï¼Œå°±æ˜¯è®¡ç®—å¤šè¾¹å½¢ç¯ç»•è¯¥ç‚¹çš„æ¬¡æ•°ã€‚å½“ç¯ç»•æ•°ï¼ˆwnï¼‰ä¸º 0 æ—¶ï¼Œè¯¥ç‚¹åœ¨å¤šè¾¹å½¢ä¹‹å¤–ï¼›å¦åˆ™å°±åœ¨å†…éƒ¨ã€‚

{% asset_img point-to-polygon-wn.png å¤æ‚å¤šè¾¹å½¢ä½¿ç”¨ç¯ç»•æ•°æ–¹æ³•æ›´ç²¾ç¡® %}

è¿™ä¸ªæ–¹æ³•åœ¨é¢å¯¹éç®€å•å¤šè¾¹å½¢ã€ä»¥åŠè·ç¦»å¤šè¾¹å½¢æè¿‘çš„ç‚¹æ—¶æ›´ç²¾ç¡®ã€‚ä½†æ˜¯ä¸€èˆ¬è¯´æ¥ï¼Œæ—¶é—´å¤æ‚åº¦æ›´é«˜ã€‚


# 0x02 ä¸æ˜¯ç®—æ³•çš„ç®—æ³•ï¼ˆå¼ºç¡¬åœ° hack ä¸€ä¸‹ï¼‰

è¿™ä¸ªæ–¹æ³•æˆ‘æš‚æ—¶è¿˜æ²¡æœ‰åœ¨ Processing ä¸­å°è¯•è¿‡ï¼Œä½†æ˜¯ç®—æ˜¯ä¸€ç§æ€è·¯ï¼Œå…ˆæ”¾åœ¨è¿™é‡Œã€‚

1. æ–°å»ºä¸€ä¸ªåœ¨å±å¹•ä¹‹å¤–çš„ç”»å¸ƒï¼ˆProcessing ä¸­å¯ä»¥ä½¿ç”¨ `pushMatrix()`, `translate()`, `popMatrix()` è¿™ä¸€ç»„æ–¹æ³•æ¥å°†å…¶å’Œç°å®åæ ‡å¯¹åº”èµ·æ¥ï¼‰
2. åœ¨è¿™ä¸ªç”»å¸ƒä¸Šï¼Œå…ˆç»™èƒŒæ™¯ç”»ä¸Šä¸€ç§é¢œè‰²ï¼ˆæ¯”å¦‚é»‘è‰²ï¼‰ï¼Œç„¶åç”¨å¦ä¸€ç§é¢œè‰²ï¼ˆæ¯”å¦‚ç™½è‰²ï¼‰ç”»å¤šè¾¹å½¢
3. å–è¯¥ç‚¹åœ¨è¿™ä¸ªç”»å¸ƒä¸Šçš„é¢œè‰²ï¼Œæ ¹æ®é¢œè‰²åˆ¤æ–­æ˜¯åœ¨å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨

ğŸ˜‚ğŸ˜‚ğŸ˜‚ æ˜¯ä¸æ˜¯å¾ˆå·§å¦™â€¦â€¦å—¯ï¼ŸğŸ¤ªğŸ¤ªğŸ¤ª

> è¿™ä¸ªæ–¹æ³•è®©æˆ‘çªç„¶è§‰å¾—ï¼Œå…¶å®åœ¨åšåˆ›æ„ç¼–ç¨‹çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™æ²¡å¿…è¦å¾ªè§„è¹ˆçŸ©éè¦ç”¨ä¼ ç»Ÿç®—æ³•å»åšã€‚è¿™å¤§æ¦‚å°±æ˜¯è®¾è®¡å¸ˆå’Œç¨‹åºå‘˜æ€è·¯çš„ä¸åŒå§

æ³¨ï¼šè¿™ä¸ªæ–¹æ³•åœ¨ç”»å¸ƒä¸å¤§çš„æ—¶å€™ä»¥åŠå¯ä»¥ä½¿ç”¨ GPU åŠ é€Ÿçš„æ—¶å€™å¥½ç”¨

# 0x03 å‚è€ƒèµ„æ–™

1. [GEOMETRIC ALGORITHMS](http://www.dcs.gla.ac.uk/~pat/52233/slides/Geometry1x1.pdf)
2. [How can I determine whether a 2D Point is within a Polygon?](https://stackoverflow.com/questions/217578/how-can-i-determine-whether-a-2d-point-is-within-a-polygon)
3. [Inclusion of a Point in a Polygon](http://geomalgorithms.com/a03-_inclusion.html)
